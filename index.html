<!DOCTYPE html>
<html>
<head>
  <title>Bake your cake</title>
  <meta name="description" content="Bake your cake">
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <style>
    .start-ui { position: absolute; top:50%; left:50%; transform:translate(-50%,-50%); z-index:10; text-align:center;}
    .start-ui button { margin:10px; padding:15px 30px; font-size:18px; cursor:pointer; }
    #cakeChoices { position:absolute; top:20%; left:50%; transform:translateX(-50%); display:none; gap:20px; z-index:10; }
    .cake-tab { padding:20px; border-radius:10px; color:white; font-size:20px; cursor:pointer; text-align:center; width:180px; font-weight:bold; }
    #chocolateTab { background-color:#8B4513; }
    #blueberryTab { background-color:#1E90FF; }
    #cherryTab { background-color:#FF69B4; }
    #recipePanel { position:absolute; top:20%; left:5%; padding:20px; border-radius:12px; font-family:sans-serif; font-size:18px; display:none; z-index:10; min-width:200px; color:white; }
    #recipePanel h2 { margin-top:0; font-size:22px; text-align:center; }
    #recipePanel ul { list-style:none; padding:0; }
    #recipePanel li { margin:5px 0; font-weight:bold; }
    #recipePanel li.collected { color: lightgreen; }
  </style>
</head>

<body>

<div class="start-ui" id="startScreen">
  <h1>Bake your cake</h1>
  <button onclick="startGame()">Start</button>
  <button onclick="window.close()">Quit</button>
</div>

<div id="cakeChoices">
  <div id="chocolateTab" class="cake-tab" onclick="selectCake('chocolate')">Chocolate Cake</div>
  <div id="blueberryTab" class="cake-tab" onclick="selectCake('blueberry')">Blueberry Cake</div>
  <div id="cherryTab" class="cake-tab" onclick="selectCake('cherry')">Cherry Cake</div>
</div>

<div id="recipePanel"></div>

<a-scene id="scene" vr-mode-ui="enabled: false" style="display:none;">
  <a-entity id="cameraRig" position="0 0 0">
    <a-camera position="1 5.0 0">
      <a-cursor rayOrigin="mouse" material="color:black; shader:flat"></a-cursor>
    </a-camera>
  </a-entity>

  <a-entity light="type: ambient; intensity: 0.5"></a-entity>
  <a-entity light="type: directional; intensity: 0.8" position="0 2 1"></a-entity>

  <!-- Kitchen background objects -->
  <a-entity id="countertop" gltf-model="countertop.glb"></a-entity>
  <a-entity id="stove" gltf-model="stove.glb"></a-entity>
  <a-entity id="shelves" gltf-model="shelves.glb"></a-entity>

  <!-- Ingredients -->
  <!-- Chocolate Cake -->
  <a-entity id="flour" class="ingredient chocolate" gltf-model="flour.glb" position="-0.5 1 -1.5" scale="0.6 0.6 0.6" rotation="0 25 0" visible="false"></a-entity>
  <a-entity id="sugar" class="ingredient chocolate" gltf-model="sugar.glb" position="0 1 -1.5" scale="0.6 0.6 0.6" rotation="0 20 0" visible="false"></a-entity>
  <a-entity id="butter" class="ingredient chocolate" gltf-model="butter.glb" position="0.5 1 -1.5" scale="0.6 0.6 0.6" rotation="0 15 0" visible="false"></a-entity>
  <a-entity id="milk" class="ingredient chocolate" gltf-model="milk.glb" position="-0.3 1 -1.2" scale="0.6 0.6 0.6" rotation="0 10 0" visible="false"></a-entity>
  <a-entity id="chocolate" class="ingredient chocolate" gltf-model="choco.glb" position="0.3 1 -1.2" scale="0.6 0.6 0.6" rotation="0 10 0" visible="false"></a-entity>
  <a-entity id="strawberries" class="ingredient chocolate" gltf-model="strawberry.glb" position="0 1 -1" scale="0.2 0.2 0.2" rotation="0 25 45" visible="false"></a-entity>
  <a-entity id="spatulaChocolate" class="ingredient chocolate" gltf-model="spatula.glb" position="0 1 -0.8" scale="0.6 0.6 0.6" rotation="0 0 0" visible="false"></a-entity>

  <!-- Blueberry Cake -->
  <a-entity id="flourBlueberry" class="ingredient blueberry" gltf-model="flour.glb" position="-0.5 1 -1.4" scale="0.6 0.6 0.6" rotation="0 25 0" visible="false"></a-entity>
  <a-entity id="sugarBlueberry" class="ingredient blueberry" gltf-model="sugar.glb" position="0 1 -1.4" scale="0.6 0.6 0.6" rotation="0 20 0" visible="false"></a-entity>
  <a-entity id="butterBlueberry" class="ingredient blueberry" gltf-model="butter.glb" position="0.5 1 -1.4" scale="0.6 0.6 0.6" rotation="0 15 0" visible="false"></a-entity>
  <a-entity id="milkBlueberry" class="ingredient blueberry" gltf-model="milk.glb" position="-0.3 1 -1.1" scale="0.6 0.6 0.6" rotation="0 10 0" visible="false"></a-entity>
  <a-entity id="blueberries" class="ingredient blueberry" gltf-model="blueberries.glb" position="0.3 1 -1.1" scale="0.6 0.6 0.6" rotation="0 10 0" visible="false"></a-entity>
  <a-entity id="vanillaBlueberry" class="ingredient blueberry" gltf-model="vanilla.glb" position="0 1 -0.9" scale="0.6 0.6 0.6" rotation="0 0 0" visible="false"></a-entity>
  <a-entity id="spatulaBlueberry" class="ingredient blueberry" gltf-model="spatula.glb" position="0 1 -0.7" scale="0.6 0.6 0.6" rotation="0 0 0" visible="false"></a-entity>

  <!-- Cherry Cake -->
  <a-entity id="flourCherry" class="ingredient cherry" gltf-model="flour.glb" position="-0.5 1 -1.3" scale="0.6 0.6 0.6" rotation="0 25 0" visible="false"></a-entity>
  <a-entity id="sugarCherry" class="ingredient cherry" gltf-model="sugar.glb" position="0 1 -1.3" scale="0.6 0.6 0.6" rotation="0 20 0" visible="false"></a-entity>
  <a-entity id="butterCherry" class="ingredient cherry" gltf-model="butter.glb" position="0.5 1 -1.3" scale="0.6 0.6 0.6" rotation="0 15 0" visible="false"></a-entity>
  <a-entity id="milkCherry" class="ingredient cherry" gltf-model="milk.glb" position="-0.3 1 -1.0" scale="0.6 0.6 0.6" rotation="0 10 0" visible="false"></a-entity>
  <a-entity id="cherries" class="ingredient cherry" gltf-model="cherries.glb" position="0.3 1 -1.0" scale="0.6 0.6 0.6" rotation="0 10 0" visible="false"></a-entity>
  <a-entity id="vanillaCherry" class="ingredient cherry" gltf-model="vanilla.glb" position="0 1 -0.8" scale="0.6 0.6 0.6" rotation="0 0 0" visible="false"></a-entity>
  <a-entity id="spatulaCherry" class="ingredient cherry" gltf-model="spatula.glb" position="0 1 -0.6" scale="0.6 0.6 0.6" rotation="0 0 0" visible="false"></a-entity>

  <a-sound id="mainmusic" src="baking cooking jazz.mp3" autoplay="false" loop="true"></a-sound>
</a-scene>

<script>
const recipes = {
  chocolate: ["Flour", "Sugar", "Butter", "Milk", "Chocolate", "Strawberries", "Spatula"],
  blueberry: ["Flour", "Sugar", "Butter", "Milk", "Vanilla", "Blueberries", "Spatula"],
  cherry: ["Flour", "Sugar", "Butter", "Milk", "Vanilla", "Cherries", "Spatula"]
};

function startGame() {
  document.getElementById('startScreen').style.display='none';
  document.getElementById('cakeChoices').style.display='flex';
}

function selectCake(cakeType){
  const scene = document.getElementById('scene');
  scene.style.display='block';
  const recipePanel = document.getElementById('recipePanel');
  recipePanel.style.display='block';
  recipePanel.style.backgroundColor = cakeType==="blueberry"?"#1E90FF":cakeType==="chocolate"?"#8B4513":"#FF69B4";

  recipePanel.innerHTML = `<h2>${cakeType.charAt(0).toUpperCase()+cakeType.slice(1)} Cake</h2><ul>
  ${recipes[cakeType].map(item=>`<li id="recipe-${item.toLowerCase()}">${item}</li>`).join('')}</ul>`;

  // Hide all ingredients
  document.querySelectorAll('.ingredient').forEach(el=>el.setAttribute('visible',false));

  // Show only relevant cake ingredients
  document.querySelectorAll(`.ingredient.${cakeType}`).forEach(el=>{
    el.setAttribute('visible',true);
    el.addEventListener('click',()=>collectIngredient(el, cakeType));
  });
}

function collectIngredient(el, cakeType){
  el.setAttribute('visible',false);
  let id = el.id.toLowerCase().replace(cakeType,'').replace(/blueberry|cherry|chocolate/,'').trim();
  id = id===""?el.id.toLowerCase():id;
  const li = document.getElementById(`recipe-${id}`);
  if(li && !li.classList.contains('collected')){
    li.classList.add('collected');
    li.innerHTML = `âœ… ${li.innerText}`;
  }
}
</script>

</body>
</html>
