<!DOCTYPE html>
<html>
<head>
  <title>Bake your cake</title>
  <meta name="description" content="Bake your cake">
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>

  <style>
    body, html { margin:0; padding:0; height:100%; width:100%; font-family:sans-serif; }
    
    #startScreen {
      position:absolute; top:0; left:0; width:100%; height:100%;
      display:flex; flex-direction:column; justify-content:center; align-items:center;
      background: url('https://cdn.pixabay.com/photo/2015/01/14/19/20/bake-599521_1280.jpg') no-repeat center center;
      background-size: cover; text-align:center; z-index:10;
    }
    #startScreen::before {
      content:""; position:absolute; top:0; left:0; width:100%; height:100%;
      background: rgba(0,0,0,0.5); z-index:-1;
    }
    #startScreen button { margin:10px; padding:15px 30px; font-size:18px; cursor:pointer; }

    #cakeChoices {
      position:absolute; top:0; left:0; width:100%; height:100%;
      display:none; flex-direction:column; justify-content:center; align-items:center; gap:20px; z-index:10;
      background: url('https://cdn.pixabay.com/photo/2015/01/14/19/20/bake-599521_1280.jpg') no-repeat center center;
      background-size: cover;
    }
    #cakeChoices::before { content:""; position:absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); z-index:-1; }

    .cake-tab {
      padding:20px; border-radius:10px; color:white; font-size:20px; cursor:pointer;
      text-align:center; width:180px; font-weight:bold;
    }
    #chocolateTab{background-color:#8B4513;} #blueberryTab{background-color:#1E90FF;} #cherryTab{background-color:#FF69B4;}

    #recipePanel {
      position:absolute; top:20%; left:5%; padding:20px; border-radius:12px;
      font-size:18px; display:none; z-index:10; min-width:200px; color:white;
    }
    #recipePanel h2 { margin-top:0; font-size:22px; text-align:center; }
    #recipePanel ul { list-style:none; padding:0; }
    #recipePanel li { margin:5px 0; font-weight:bold; }
    #recipePanel li.collected { color:lightgreen; }
    #recipePanel.chocolate { background-color:#8B4513; }
    #recipePanel.blueberry { background-color:#1E90FF; }
    #recipePanel.cherry { background-color:#FF69B4; }
  </style>

  <script>
    let currentIngredients = [];

    function startGame(){
      document.getElementById('startScreen').style.display='none';
      document.getElementById('cakeChoices').style.display='flex';
    }

    function chooseCake(cakeName){
      document.getElementById('cakeChoices').style.display='none';
      document.getElementById('scene').style.display='block';

      const recipePanel=document.getElementById('recipePanel');
      recipePanel.style.display='block';
      recipePanel.className=''; recipePanel.classList.add(cakeName);

      if(cakeName==='blueberry'){
        currentIngredients=["flour","sugar","butter","milk","vanilla","blueberries","strawberry","spatula","whisk"];
      } else if(cakeName==='chocolate'){
        currentIngredients=["flour","sugar","butter","milk","vanilla","choco","strawberry","spatula","whisk"];
      } else if(cakeName==='cherry'){
        currentIngredients=["flour","sugar","butter","milk","vanilla","cherries","spatula","whisk"];
      }

      recipePanel.innerHTML=`<h2>${cakeName.charAt(0).toUpperCase() + cakeName.slice(1)} Cake</h2><ul>${currentIngredients.map(item=>`<li id="recipe-${item.toLowerCase()}"><span class="check"></span> ${item}</li>`).join('')}</ul>`;

      // Show all kitchen objects
      const entityIds=[
        'kitchenrightwall','blackcabinet','blackplate','bluebottle','bowl','clock','coffee','coffeemaker',
        'counterfloorright','cuttingboard','exhaustfan','faucet','floor','kitchenopenwall','kitchenroofslide',
        'kitchenrooftop','kitchenwallback','kniveholder','ladlesandspoonswall','light','mugs','pandeep',
        'plant','plantwindow','salt1','salt2','salt3','shelves','sink','slicefruitcake','soap','soap2',
        'spatula','stool','stove','stovecabinets','sugarbag','vanilla','wallclock','wallcountertop','wallstove',
        'whitebottle','windowbottom','sugar','whisk','rollingpin','radio','platenice','milk','fryingpan',
        'chocostrawberrycake','flour','choco','cherries','butter','blueberries','plate','strawberry'
      ];

      const collectablePositions = {
        'flour': '0 1 2', 'sugar': '-1 1 2', 'butter': '1 1 2', 'milk': '0 1 3',
        'vanilla': '-1 1 3', 'blueberries':'1 1 3', 'strawberry':'0 1 4','spatula':'-1 1 4','whisk':'1 1 4',
        'choco':'0 1 2','cherries':'1 1 3','chocostrawberrycake':'-1 1 3','plate':'0 1 2','pandeep':'1 1 2','rollingpin':'0 1 3','radio':'-1 1 2','platenice':'1 1 3','fryingpan':'0 1 2'
      };

      entityIds.forEach(id=>{
        const el=document.getElementById(id); 
        if(el){
          el.setAttribute('visible', true);
          if(el.classList.contains('collectable')){
            el.setAttribute('scale','1.5 1.5 1.5'); // bigger
            el.setAttribute('position', collectablePositions[id] || '0 1 0'); // assign realistic position
          }
        }
      });

      // Restart music
      const music=document.querySelector('#mainmusic');
      if(music && music.components && music.components.sound){
        music.components.sound.stopSound(); music.components.sound.playSound();
      }
    }

    // Collectable component
    AFRAME.registerComponent('collectable',{
      init:function(){
        this.el.addEventListener('click',()=>{
          const name=this.el.getAttribute('data-name');
          this.el.setAttribute('visible',false);

          if(currentIngredients.includes(name)){
            const li=document.getElementById(`recipe-${name}`);
            if(li){ 
              li.querySelector('.check').textContent="âœ…"; 
              li.classList.add('collected'); 
            }
          }
        });
      }
    });
  </script>
</head>
<body>
  <div id="startScreen">
    <h1 style="color:white;">Bake your cake</h1>
    <button onclick="startGame()">Start</button>
    <button onclick="window.close()">Quit</button>
  </div>

  <div id="cakeChoices">
    <div id="chocolateTab" class="cake-tab" onclick="chooseCake('chocolate')">Chocolate Cake</div>
    <div id="blueberryTab" class="cake-tab" onclick="chooseCake('blueberry')">Blueberry Cake</div>
    <div id="cherryTab" class="cake-tab" onclick="chooseCake('cherry')">Cherry Cake</div>
  </div>

  <div id="recipePanel"></div>

  <a-scene id="scene" vr-mode-ui="enabled:false" style="display:none;">
    <a-entity id="cameraRig" position="0 3 0">
      <a-camera>
        <a-cursor material="color:black; shader:flat" fuse="false" rayOrigin="mouse"></a-cursor>
      </a-camera>
      <a-entity raycaster="objects: .collectable; far: 20"></a-entity>
    </a-entity>
    <a-entity light="type:ambient; intensity:0.5"></a-entity>
    <a-entity light="type:directional; intensity:0.8" position="0 2 1"></a-entity>

    <!-- Kitchen and collectable objects -->
    <a-entity id="kitchenrightwall" gltf-model="kitchenrightwall.glb" visible="false"></a-entity>
    <a-entity id="blackcabinet" gltf-model="blackcabinet.glb" visible="false"></a-entity>
    <a-entity id="blackplate" gltf-model="blackplate.glb" visible="false"></a-entity>
    <a-entity id="bluebottle" gltf-model="bluebottle.glb" visible="false"></a-entity>
    <a-entity id="bowl" gltf-model="bowl.glb" visible="false"></a-entity>
    <a-entity id="cuttingboard" gltf-model="cuttingboard.glb" visible="false" class="collectable" collectable data-name="cuttingboard"></a-entity>
    <a-entity id="spatula" gltf-model="spatula.glb" visible="false" class="collectable" collectable data-name="spatula"></a-entity>
    <a-entity id="whisk" gltf-model="whisk.glb" visible="false" class="collectable" collectable data-name="whisk"></a-entity>
    <a-entity id="flour" gltf-model="flour.glb" visible="false" class="collectable" collectable data-name="flour"></a-entity>
    <a-entity id="sugar" gltf-model="sugar.glb" visible="false" class="collectable" collectable data-name="sugar"></a-entity>
    <a-entity id="butter" gltf-model="butter.glb" visible="false" class="collectable" collectable data-name="butter"></a-entity>
    <a-entity id="milk" gltf-model="milk.glb" visible="false" class="collectable" collectable data-name="milk"></a-entity>
    <a-entity id="vanilla" gltf-model="vanilla.glb" visible="false" class="collectable" collectable data-name="vanilla"></a-entity>
    <a-entity id="strawberry" gltf-model="strawberry.glb" visible="false" class="collectable" collectable data-name="strawberry"></a-entity>
    <a-entity id="blueberries" gltf-model="blueberries.glb" visible="false" class="collectable" collectable data-name="blueberries"></a-entity>
    <a-entity id="choco" gltf-model="choco.glb" visible="false" class="collectable" collectable data-name="choco"></a-entity>
    <a-entity id="cherries" gltf-model="cherries.glb" visible="false" class="collectable" collectable data-name="cherries"></a-entity>
    <a-entity id="chocostrawberrycake" gltf-model="chocostrawberrycake.glb" visible="false" class="collectable" collectable data-name="chocostrawberrycake"></a-entity>
    <a-entity id="plate" gltf-model="plate.glb" visible="false" class="collectable" collectable data-name="plate"></a-entity>
    <a-entity id="pandeep" gltf-model="pandeep.glb" visible="false" class="collectable" collectable data-name="pandeep"></a-entity>
    <a-entity id="rollingpin" gltf-model="rollingpin.glb" visible="false" class="collectable" collectable data-name="rollingpin"></a-entity>
    <a-entity id="radio" gltf-model="radio.glb" visible="false" class="collectable" collectable data-name="radio"></a-entity>
    <a-entity id="platenice" gltf-model="platenice.glb" visible="false" class="collectable" collectable data-name="platenice"></a-entity>
    <a-entity id="fryingpan" gltf-model="fryingpan.glb" visible="false" class="collectable" collectable data-name="fryingpan"></a-entity>

    <a-sound id="mainmusic" src="baking cooking jazz.mp3" autoplay="false" loop="true"></a-sound>
  </a-scene>
</body>
</html>
